/* ---- Admin UI base (scoped with .adm-*) ---- */
:root {
  --adm-bg: #ffffff;
  --adm-fg: #1f2937;
  --adm-muted: #6b7280;
  --adm-border: #e5e7eb;
  --adm-primary: #2563eb;
  --adm-primary-hover: #1d4ed8;
  --adm-danger: #dc2626;
  --adm-danger-hover: #b91c1c;
  --adm-success: #059669;
  --adm-warning: #d97706;
  --adm-radius: 10px;
  --adm-shadow: 0 8px 24px rgba(0,0,0,.08);
  --adm-z-modal: 9999;
}

.adm-card {
  background: var(--adm-bg);
  border: 1px solid var(--adm-border);
  border-radius: var(--adm-radius);
  box-shadow: var(--adm-shadow);
  padding: 16px;
}

.adm-row { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
.adm-grow { flex: 1 1 auto; }
.adm-muted { color: var(--adm-muted); font-size: 12px; }

.adm-input, .adm-select, .adm-file {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid var(--adm-border);
  border-radius: 8px;
  outline: none;
}
.adm-input:focus, .adm-select:focus, .adm-file:focus {
  border-color: var(--adm-primary);
  box-shadow: 0 0 0 3px rgba(37,99,235,.15);
}

.adm-btn {
  appearance: none; border: none; border-radius: 9px;
  padding: 8px 12px; cursor: pointer; font-weight: 600;
  background: #f3f4f6; color: var(--adm-fg);
}
.adm-btn--primary { background: var(--adm-primary); color: #fff; }
.adm-btn--primary:hover { background: var(--adm-primary-hover); }
.adm-btn--ghost { background: transparent; border: 1px solid var(--adm-border); }
.adm-btn--danger { background: var(--adm-danger); color:#fff; }
.adm-btn--danger:hover { background: var(--adm-danger-hover); }
.adm-btn:disabled { opacity: .6; cursor: not-allowed; }

.adm-table {
  width: 100%;
  border-collapse: collapse;
  background: var(--adm-bg);
  border: 1px solid var(--adm-border);
  border-radius: var(--adm-radius);
  overflow: hidden;
}
.adm-table th, .adm-table td {
  padding: 10px 12px; text-align: left; border-bottom: 1px solid var(--adm-border);
  vertical-align: top;
}
.adm-table thead th { background:#f9fafb; font-weight:700; position: sticky; top:0; z-index:1; }
.adm-table tr:hover td { background:#fcfcfd; }

.adm-badge {
  display:inline-block; padding:2px 8px; border-radius:999px; font-size:12px; font-weight:700;
}
.adm-badge--ok { background:#ecfdf5; color:#065f46; }
.adm-badge--warn { background:#fffbeb; color:#92400e; }
.adm-badge--danger { background:#fef2f2; color:#991b1b; }
.adm-badge--muted { background:#eef2ff; color:#3730a3; }

.adm-modal { position:fixed; inset:0; display:none; background:rgba(0,0,0,.6); z-index: var(--adm-z-modal); }
.adm-modal__dialog { background:#fff; margin:5% auto; max-width:720px; border-radius:12px; box-shadow: var(--adm-shadow); overflow:hidden; }
.adm-modal__head { padding:14px 16px; border-bottom:1px solid var(--adm-border); display:flex; align-items:center; justify-content:space-between; }
.adm-modal__body { padding:16px; }
.adm-modal__foot { padding:14px 16px; border-top:1px solid var(--adm-border); display:flex; justify-content:flex-end; gap:10px; }

.adm-form-grid { display:grid; gap:10px; grid-template-columns: repeat(2, minmax(0,1fr)); }
.adm-form-grid .full { grid-column: 1 / -1; }

@media (max-width: 720px){
  .adm-form-grid { grid-template-columns: 1fr; }
}
/* === Readability upgrades === */
html, body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }

/* Compact input sizing helpers */
.adm-input[data-size="xs"], .adm-select[data-size="xs"] { max-width: 120px; }
.adm-input[data-size="sm"], .adm-select[data-size="sm"] { max-width: 180px; }
.adm-input[data-size="md"], .adm-select[data-size="md"] { max-width: 260px; }

/* Table striping */
.adm-table tbody tr:nth-child(odd) td { background: #fafafa; }

/* Channel pills */
.adm-pill { display:inline-block; padding:3px 10px; border-radius:999px; font-size:12px; font-weight:700; border:1px solid var(--adm-border); }
.adm-pill--delivery { background:#eef2ff; color:#3730a3; }
.adm-pill--dining   { background:#ecfdf5; color:#065f46; }

/* Friendlier "comic" popovers (for dropdown panels/modals used as pickers) */
.dropdown-panel,
.adm-popover {
  display: none;
  position: absolute;
  z-index: 1000;
  background: #fff;
  border: 2px solid #111;
  border-radius: 14px;
  box-shadow: 5px 5px 0 #111;            /* comic offset */
  padding: 10px;
  min-width: 260px;
  max-width: 420px;
  max-height: 320px;
  overflow: auto;
}
.dropdown-wrap .dropdown-panel { display: none; }
.dropdown-wrap.open .dropdown-panel { display: block; }

/* Buttons inside popovers */
.dropdown-panel .adm-btn { border-radius: 999px; }

/* Make default modal dialog a bit narrower for friendlier feel */
.adm-modal__dialog { max-width: 640px; }
/* === Readability upgrades === */
html, body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }

/* Compact input sizing helpers */
.adm-input[data-size="xs"], .adm-select[data-size="xs"] { max-width: 120px; }
.adm-input[data-size="sm"], .adm-select[data-size="sm"] { max-width: 180px; }
.adm-input[data-size="md"], .adm-select[data-size="md"] { max-width: 260px; }

/* Table striping */
.adm-table tbody tr:nth-child(odd) td { background: #fafafa; }

/* Channel pills */
.adm-pill { display:inline-block; padding:3px 10px; border-radius:999px; font-size:12px; font-weight:700; border:1px solid var(--adm-border); }
.adm-pill--delivery { background:#eef2ff; color:#3730a3; }
.adm-pill--dining   { background:#ecfdf5; color:#065f46; }

/* Friendlier "comic" popovers (for dropdown panels/modals used as pickers) */
.dropdown-panel,
.adm-popover {
  display: none;
  position: absolute;
  z-index: 1000;
  background: #fff;
  border: 2px solid #111;
  border-radius: 14px;
  box-shadow: 5px 5px 0 #111;
  padding: 10px;
  min-width: 260px;
  max-width: 420px;
  max-height: 320px;
  overflow: auto;
}
.dropdown-wrap .dropdown-panel { display: none; }
.dropdown-wrap.open .dropdown-panel { display: block; }

/* Buttons inside popovers */
.dropdown-panel .adm-btn { border-radius: 999px; }

/* Make default modal dialog a bit narrower for friendlier feel */
.adm-modal__dialog { max-width: 640px; }

/* ================================
   Add New Menu Item — alignment only (CSS-only)
   Leaves colors, fonts, popovers unchanged
   ================================ */

/* 1) Name: compact single line */
#menuForm #itemName {
  display: block;
  max-width: 360px;          /* “not more longer than this” */
  width: 100%;
  margin-bottom: 12px;
}

/* 2) Description: look like a 360×100 box (stretchable if browser allows) */
#menuForm #itemDescription {
  display: block;
  width: 360px;
  height: 100px;
  min-width: 360px;
  min-height: 100px;
  /* some browsers let inputs resize; if not, it will still look like a square box */
  resize: both;
  overflow: auto;
  margin-bottom: 12px;
}

/* 3) CATEGORY row → put everything on one line:
      [native select] [Select Category ▾] [Add New Category] [Add Category] */
.adm-form-grid .full:has(#itemCategory) {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
}
#itemCategory { max-width: 180px; }
#newCategoryInput { max-width: 150px; }
#addCategoryBtn { min-width: 100px; }

/* 4) COURSE row → one line:
      [native select] [Select Course ▾] [Add New Food Course] [Add Course] */
.adm-form-grid .full:has(#foodCourse) {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
}
#foodCourse { max-width: 180px; }
#newCourseInput { max-width: 160px; }
#addCourseBtn { min-width: 100px; }

/* 5) ADD-ONS row → one line:
      [multi-select] [Select Add-ons ▾] [Add New Add-on] [Price] [Add Add-on] */
.adm-form-grid .full:has(#addonsSelect) {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
}
#addonsSelect { max-width: 180px; }
#newAddonInput, #newAddonPrice { max-width: 150px; }
#addAddonBtn { min-width: 110px; }

/* 6) Food Type — its own compact line */
#foodType {
  display: block;
  max-width: 180px;
  width: 100%;
  margin: 8px 0 12px;
}

/* 7) Quantity Type — its own compact line */
#qtyType {
  display: block;
  max-width: 220px;
  width: 100%;
  margin: 0 0 12px;
}

/* 8) Image label on one line, “Choose File” on the next */
.adm-form-grid .full:has(#itemImage) {
  display: block;
}
#itemImage {
  display: block;      /* places file input under the "Image" label */
  max-width: 260px;
  width: 100%;
  margin-top: 6px;
}

/* 9) Small screens: let controls wrap naturally */
@media (max-width: 520px) {
  #itemCategory, #foodCourse, #addonsSelect { max-width: 100%; }
  #newCategoryInput, #newCourseInput, #newAddonInput, #newAddonPrice { max-width: 100%; }
}

/* === Fix: place Quantity Type directly under Food Type === */
/* Make each control live on its own full-width row inside the form grid */
.adm-form-grid .full:has(#foodType),
.adm-form-grid .full:has(#qtyType) {
  display: block;         /* break any flex/inline row behavior */
  width: 100%;
  /* if the grid uses columns, span the whole row */
  grid-column: 1 / -1;
}

/* Compact, block layout for the two selects */
#foodType,
#qtyType {
  display: block;
  max-width: 220px;
  width: 100%;
}

/* Ensure Quantity Type starts on a new line with comfortable spacing */
#qtyType {
  clear: both;
  margin: 0 0 12px;
}

/* === Force Food Type and Quantity Type to stack (full-width rows) === */
#foodType,
#qtyType {
  grid-column: 1 / -1 !important;  /* take the whole grid row */
  display: block;                   /* render as blocks for good measure */
  max-width: 220px;                 /* compact width as before */
  width: 100%;
}

/* Add comfy spacing below Quantity Type */
#qtyType { margin: 0 0 12px; }

/* Safety: if a wrapper tries to line them up, neutralize it */
#foodType, #qtyType {
  float: none;                      /* ignore any float rules */
  clear: both;                      /* always start on a clean line */
}

/* Ensure all native controls inherit the page font (Inter/system UI) */
.adm-input,
.adm-select,
.adm-file,
textarea,
input,
select,
button {
  font: inherit;
  line-height: 1.4;
}

/* Explicitly normalize the Description control */
#menuForm #itemDescription {
  font: inherit;
}

/* Price controls should be compact, left-aligned, and stack vertically */
#menuForm #itemPrice,
#menuForm #halfPrice,
#menuForm #fullPrice {
  grid-column: 1 / -1;   /* occupy a full grid row so they don't auto-flow side-by-side */
  max-width: 220px;       /* avoid long bars */
  width: 100%;
  display: none;          /* JS will flip to 'block' when relevant */
  margin: 6px 0 8px;
  box-sizing: border-box;
}
/* Make Add Menu Item button sit closer to the file input */
#menuForm .full:last-of-type {
  margin-top: 8px;    /* reduce space above */
  text-align: left;  /* keep alignment */
}

#menuForm .full:last-of-type .adm-btn {
  margin-top: 4px;    /* small gap from Choose File */
}
/* ================================
   Search & Filters – single-row, compact widths
   ================================ */

/* Make the Search & Filters container a tidy row */
#panel-menu h3 + .adm-card.adm-row {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: nowrap;         /* keep on one line on wide screens */
  overflow-x: auto;          /* avoid layout break if viewport is narrow */
  padding-bottom: 6px;       /* small breathing room for the row */
}

/* Cap widths so everything is ~10cm and visually consistent */
#searchInput,
#filterCategory,
#filterCourse,
#filterType {
  flex: 0 0 auto;
  width: 6cm;               /* target width per your spec */
  max-width: 100%;
}

/* Give the search input a touch more room if you want; comment out if not desired */
#searchInput {
  width: 6cm;
}

/* Responsive fallback: allow wrapping on small screens */
@media (max-width: 1024px) {
  #panel-menu h3 + .adm-card.adm-row {
    flex-wrap: wrap;
  }
  #searchInput,
  #filterCategory,
  #filterCourse,
  #filterType {
    width: min(6cm, 100%);
  }
}

/* === Search input with icon === */
#searchInput {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="gray" viewBox="0 0 24 24"><path d="M10,2A8,8,0,1,0,18,10a8,8,0,0,0-8-8Zm0,14a6,6,0,1,1,6-6A6,6,0,0,1,10,16ZM21.71,20.29l-4.4-4.4a1,1,0,0,0-1.42,1.42l4.4,4.4a1,1,0,0,0,1.42-1.42Z"/></svg>') no-repeat 8px center;
  background-size: 16px 16px;
  padding-left: 32px;  /* leaves space for icon */
}

/* ================================
   Search & Filter dropdowns only
   ================================ */
#searchInput,
#filterCategory,
#filterCourse,
#filterType {
  font: inherit;        /* match site font */
  font-size: 14px;      /* consistent with site text */
  line-height: 1.4;
  color: inherit;       /* match body text color */
}

/* Options inside the dropdowns */
#filterCategory option,
#filterCourse option,
#filterType option {
  font: inherit;
  font-size: 14px;
  line-height: 1.4;
  color: inherit;
}

/* ================================
   Promotions (Coupons & Banners) – alignment
   ================================ */

#panel-promotions h3 {
  margin: 14px 0 8px;
}

/* Column grids with consistent paddings and widths */
#panel-promotions .adm-grid {
  display: grid;
  grid-auto-rows: minmax(44px, auto);
  align-items: center;
  border-bottom: 1px solid var(--adm-border);
}

#panel-promotions .adm-grid > div {
  padding: 10px 12px;
}

/* Header row styling */
#panel-promotions .adm-grid-head {
  background: #f9fafb;
  font-weight: 700;
  border-top: 1px solid var(--adm-border);
  border-bottom: 2px solid var(--adm-border);
}

/* Exact column tracks to remove “wobble” across rows */
#panel-promotions .adm-grid-coupons {
  /* Code | Channel | Value | Usage | Status | Actions */
  grid-template-columns: 180px 120px 140px 140px 120px 1fr;
}
#panel-promotions .adm-grid-banners {
  /* Preview | Title | Published To | Status | Actions */
  grid-template-columns: 120px 1fr 220px 120px 1fr;
}

/* Keep action buttons aligned to the right and evenly spaced */
#panel-promotions .adm-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

/* Make pills and thumbnails sit on the baseline nicely */
#panel-promotions .adm-pill { display: inline-block; }
#panel-promotions img { display: block; }

/* Form: compact widths so the row stays neat */
#panel-promotions #newCouponForm .adm-input,
#panel-promotions #newCouponForm .adm-select {
  width: auto;
}
#panel-promotions #couponCode         { min-width: 180px; }
#panel-promotions #couponChannel,
#panel-promotions #couponType         { width: 140px; }
#panel-promotions #couponValue,
#panel-promotions #couponUsageLimit   { width: 140px; }

#panel-promotions #newBannerForm #bannerTitle { min-width: 220px; }

/* Action buttons: consistent touch target & visual rhythm */
#panel-promotions .adm-actions .adm-btn { min-width: 92px; }

/* Extra: unify subtle background on hover for whole row (friendly feedback) */
#panel-promotions .adm-grid:not(.adm-grid-head):hover > div {
  background: #fcfcfd;
}
/* ================================
   Promotions — Column & Colors
   ================================ */
#panel-promotions .adm-grid {
  display: grid;
  grid-auto-rows: minmax(44px, auto);
  align-items: center;
  border-bottom: 1px solid var(--adm-border, #e5e7eb);
}
#panel-promotions .adm-grid > div { padding: 10px 12px; }

#panel-promotions .adm-grid-head {
  background: #f9fafb;
  font-weight: 700;
  border-top: 1px solid var(--adm-border, #e5e7eb);
  border-bottom: 2px solid var(--adm-border, #e5e7eb);
}

/* Exact column tracks to remove wobble */
#panel-promotions .adm-grid-coupons {
  /* Code | Channel | Value | Usage | Status | Actions */
  grid-template-columns: 180px 120px 220px 140px 120px 1fr;
}


/* Actions aligned */
#panel-promotions .adm-actions { display:flex; gap:8px; justify-content:flex-end; }

/* Signature colors for pills (list rows) */
.adm-pill--delivery { background:#eef2ff; color:#1e40af; border-color:#1e40af; }
.adm-pill--dining   { background:#ecfdf5; color:#065f46; border-color:#065f46; }

/* Signature accents for the Channel select in the form */
#panel-promotions #couponChannel.chan-delivery { border-color:#1e40af; box-shadow: 0 0 0 1px rgba(30,64,175,.08) inset; }
#panel-promotions #couponChannel.chan-dining   { border-color:#065f46; box-shadow: 0 0 0 1px rgba(6,95,70,.08) inset; }

/* Tidy up inputs so the add row aligns visually */
#panel-promotions #newCouponForm .adm-input,
#panel-promotions #newCouponForm .adm-select,
#panel-promotions #newBannerForm .adm-input,
#panel-promotions #newBannerForm .adm-file {
  width: 100%;
  box-sizing: border-box;
}
#panel-promotions #newCouponForm .adm-select { min-width: 110px; }
#panel-promotions #newCouponForm #couponValue { max-width: 120px; }

/* Ensure cells don’t overflow and push subsequent cells to a new line */
#panel-promotions .adm-grid > div { min-width: 0; }
#panel-promotions .adm-actions { display:flex; gap:8px; justify-content:flex-end; }

/* ================================
   Promotions — pill buttons & inline tools
   ================================ */
#panel-promotions .chip-btn,
#panel-promotions .adm-btn {
  border-radius: 9999px;
  padding: 6px 12px;
  font-size: 12.5px;
  line-height: 1.2;
  box-shadow: none;           /* no 3D/shadow */
}

#panel-promotions .adm-btn { border: 1px solid #111; background: #fff; color: #111; }
#panel-promotions .adm-btn--primary { background: #111; color: #fff; border-color: #111; }

#panel-promotions .inline-tools {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;            /* pills wrap neatly if many coupons */
}

#panel-promotions #newBannerLinkedPreview,
#panel-promotions #newBannerTargetsPreview {
  display: inline-flex;
  gap: 6px;
  flex-wrap: wrap;
}

/* ensure grid cells can shrink content and keep columns aligned */
#panel-promotions .adm-grid > div { min-width: 0; }

/* ================================
   Promotions — Typography & Rhythm (CSS-only)
   ================================ */
#panel-promotions {
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  font-size: 14px;
  line-height: 1.4;
  /* no global color here — preserves Delivery/Dining + Active/Inactive colors */
}


/* Headings: consistent look */
#panel-promotions h3 {
  margin: 14px 0 8px;
  font-size: 16px;
  font-weight: 700;
}

/* Grid baselines — same height & padding for all rows/cells */
#panel-promotions .adm-grid {
  display: grid;
  grid-auto-rows: minmax(44px, auto);
  align-items: center;
  border-bottom: 1px solid var(--adm-border);
}
#panel-promotions .adm-grid > div {
  padding: 10px 12px;
  min-width: 0; /* prevents overflow pushing next columns down */
}

/* Header row */
#panel-promotions .adm-grid-head {
  background: #f9fafb;
  font-weight: 700;
  border-top: 1px solid var(--adm-border);
  border-bottom: 2px solid var(--adm-border);
}

/* Actions aligned right; uniform small pill buttons */
#panel-promotions .adm-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}
#panel-promotions .adm-btn,
#panel-promotions .chip-btn {
  border-radius: 9999px;
  padding: 6px 12px;
  font-size: 13px;
  line-height: 1.2;
  box-shadow: none;                 /* flat */
}
#panel-promotions .adm-btn { border: 1px solid #111; background: #fff; color: #111; }
#panel-promotions .adm-btn--primary { background: #111; color: #fff; border-color: #111; }
#panel-promotions .adm-actions .adm-btn { min-width: 88px; }

/* Linked pill lists wrap nicely inside their column */
#panel-promotions .inline-tools { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }

/* Keep Delivery/Dining distinction only (colors already defined elsewhere) */
#panel-promotions .adm-pill { display:inline-block; padding:3px 10px; border-radius:999px; font-size:12px; font-weight:700; border:1px solid var(--adm-border); }
#panel-promotions .adm-pill--delivery { background:#eef2ff; color:#1e40af; border-color:#1e40af; }
#panel-promotions .adm-pill--dining   { background:#ecfdf5;  color:#065f46; border-color:#065f46; }

#panel-promotions .adm-grid-banners{
  /* Preview | Title | Linked Coupons | Published To | Status | Actions */
  grid-template-columns: 140px 1fr 1.1fr 220px 120px 1fr;
}

/* ================================
   Promotions — responsive rows, clean file input, tidy widths
   (APPEND-ONLY)
   ================================ */

/* Even, balanced tracks on desktop */
#panel-promotions .adm-grid-coupons,
#panel-promotions .adm-grid-banners { column-gap: 12px; }

#panel-promotions .adm-grid-coupons {
  /* Code | Channel | Value | Usage | Status | Actions */
  grid-template-columns: 1.1fr 0.9fr 0.8fr 0.8fr 0.7fr auto;
}

#panel-promotions .adm-grid-banners {
  /* Preview fixed | Title | Linked | Published | Status | Actions */
  grid-template-columns: 120px 1fr 1fr 0.9fr 0.7fr auto;
}

/* Tighten tracks a bit on medium screens */
@media (max-width: 980px) {
  #panel-promotions .adm-grid-coupons {
    grid-template-columns: 1fr 0.8fr 0.7fr 0.7fr 0.6fr auto;
  }
  #panel-promotions .adm-grid-banners {
    grid-template-columns: 100px 1fr 0.9fr 0.8fr 0.6fr auto;
  }
}

/* Stack action buttons vertically inside the Actions cell on small screens */
@media (max-width: 720px) {
  #panel-promotions .adm-actions {
    flex-direction: column;
    align-items: stretch;
  }
  #panel-promotions .adm-actions .adm-btn { width: 100%; }
}

/* "Choose File" – show only native button (no shell/filename strip) */
#panel-promotions #newBannerForm input[type="file"].adm-file {
  border: none; padding: 0; background: transparent; width: auto; box-shadow: none;
  font-size: 0; /* hides filename text area so only the button remains */
}
#panel-promotions #newBannerForm input[type="file"].adm-file::file-selector-button {
  font-size: 13px; line-height: 1.2;
  border: 1px solid #111; border-radius: 9999px;
  background: #fff; color: #111; padding: 6px 12px; cursor: pointer;
}

/* Title ~ 6cm for cleaner add-row composition */
#panel-promotions #newBannerForm #bannerTitle { width: 6cm; max-width: 100%; }
#panel-promotions #newBannerForm #bannerTitle::placeholder { color: var(--adm-muted); }

/* Keep Delivery / Dining pills vivid wherever they appear */
#panel-promotions .adm-pill--delivery { background:#eef2ff; color:#1e40af; border-color:#1e40af; }
#panel-promotions .adm-pill--dining   { background:#ecfdf5; color:#065f46; border-color:#065f46; }

/* Tighter vertical rhythm + guard against overflow */
#panel-promotions .adm-grid > div { padding: 10px 10px; min-width: 0; }
#panel-promotions .adm-grid-head > div { padding: 12px 10px; }
#panel-promotions .adm-grid .adm-pill { white-space: nowrap; }
#panel-promotions .adm-grid .inline-tools { flex-wrap: wrap; }

/* =========================================================
   PROMOTIONS — DESKTOP-RESPONSIVE GRID (ZOOM-SAFE), TIDY UI
   (APPEND ONLY — no JS changes)
   ========================================================= */

/* 1) Same column template for header + rows (prevents drift) */
#panel-promotions .adm-grid-head.adm-grid-coupons,
#panel-promotions .adm-grid-coupons {
  /* Code | Channel | Value | Usage | Status | Actions */
  grid-template-columns:
    minmax(120px, 1.6fr)
    minmax(130px, 1.2fr)
    minmax(120px, 1.1fr)
    minmax(110px, 1.1fr)
    minmax(110px, 1fr)
    minmax(160px, 1.3fr) !important;
}

#panel-promotions .adm-grid-head.adm-grid-banners,
#panel-promotions .adm-grid-banners {
  /* Preview | Title | Linked | Published | Status | Actions */
  grid-template-columns:
    120px
    minmax(180px, 1.6fr)
    minmax(200px, 1.8fr)
    minmax(140px, 1.2fr)
    minmax(110px, 1fr)
    minmax(170px, 1.2fr) !important;
}

/* 2) Never let a cell force the grid wider; allow content to wrap */
#panel-promotions .adm-grid > div {
  min-width: 0;                 /* allow columns to shrink */
  overflow: hidden;             /* no spill over neighbor columns */
  overflow-wrap: anywhere;      /* wrap long tokens safely */
  display: block;               /* avoid flex pushing widths */
}

/* 3) Actions: always live under Actions column; stack when tight (any zoom) */
#panel-promotions .adm-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  align-items: center;
  flex-wrap: wrap;              /* wrap within the Actions cell when tight */
  max-width: 100%;
}
#panel-promotions .adm-actions .adm-btn {
  white-space: nowrap;          /* keep labels readable */
  flex: 0 1 auto;               /* shrink if needed but don’t grow past the cell */
  max-width: 100%;
}
/* when the viewport (or zoomed page) gets tight, stack vertically */
@media (max-width: 1250px) {
  #panel-promotions .adm-actions { flex-direction: column; align-items: stretch; }
  #panel-promotions .adm-actions .adm-btn { width: 100%; }
}

/* 4) Consistent typography for Value / Usage Limit / Published To */
#panel-promotions .adm-grid-coupons > div:nth-child(3),
#panel-promotions .adm-grid-coupons > div:nth-child(4),
#panel-promotions .adm-grid-banners > div:nth-child(4) {
  font-size: 14px;              /* match body, not tiny */
  line-height: 1.4;
}
/* keep muted color but not smaller font */
#panel-promotions .adm-muted { color: #6b7280; font-size: inherit; }

/* 5) Add-row inputs: compact, no bar overflow */
#panel-promotions #couponCode       { width: clamp(200px, 28vw, 320px); }
#panel-promotions #couponType       { width: 120px; }
#panel-promotions #couponValue      { width: 120px; }
#panel-promotions #couponUsageLimit { width: 160px; }

/* Banner add row: native file button only; title ~6cm */
#panel-promotions #newBannerForm .adm-file {
  border: none; padding: 0; background: transparent; width: auto; box-shadow: none; font-size: initial;
}
#panel-promotions #newBannerForm .adm-file::file-selector-button {
  font: inherit; border:1px solid #111; border-radius:9999px; background:#fff; color:#111; padding:6px 12px; cursor:pointer;
}
#panel-promotions #bannerTitle { width: 6cm; max-width: 100%; }

/* 6) Delivery / Dining (Channel & Published To): keep signature colors */
#panel-promotions .adm-pill { display:inline-block; padding:3px 10px; border-radius:999px; font-size:12px; font-weight:700; border:1px solid var(--adm-border); }
#panel-promotions .adm-pill--delivery { background:#eef2ff; color:#1e40af; border-color:#1e40af; }
#panel-promotions .adm-pill--dining   { background:#ecfdf5;  color:#065f46; border-color:#065f46; }

/* 7) Row rhythm & header treatment (stable at any zoom) */
#panel-promotions .adm-grid { grid-auto-rows: minmax(44px, auto); align-items: center; }
#panel-promotions .adm-grid-head {
  background: #f9fafb;
  font-weight: 700;
  border-top: 1px solid var(--adm-border);
  border-bottom: 2px solid var(--adm-border);
}
#panel-promotions .adm-grid-head > div,
#panel-promotions .adm-grid > div { padding: 10px 12px; }

/* =========================================================
   PROMOTIONS — POPOVER LAYOUT (roomy, even, scrollable)
   Append-only; no JS changes required
   ========================================================= */
#panel-promotions .adm-pop {
  position: absolute;                 /* your JS already positions it next to the button */
  box-sizing: border-box;
  width: clamp(360px, 48vw, 720px);   /* grows on wide screens, never too tiny or huge */
  max-height: min(70vh, 560px);       /* never taller than the viewport */
  overflow: auto;                     /* scroll inside; no page jump */
  padding: 14px 16px;
  border-radius: 12px;
  background: #fff;
  border: 1px solid #e5e7eb;
  box-shadow: 0 12px 28px rgba(0,0,0,.12), 0 2px 8px rgba(0,0,0,.06);
  z-index: 9999;
}

/* Title inside popover (first child your markup inserts) */
#panel-promotions .adm-pop > div:first-child {
  font-weight: 700;
  font-size: 15px;
  margin-bottom: 10px;
}

/* Popover form grid: fixed label column + fully flexible field column */

#panel-promotions .adm-pop [style*="grid-template-columns:120px"] {
  display: grid !important;
  grid-template-columns: 120px minmax(0, 1fr) !important; /* field column can shrink */
  column-gap: 12px !important;
  row-gap: 10px !important;
  align-items: center !important;
  max-width: 100%;
  box-sizing: border-box;
}
/* Ensure children in the field column can actually shrink */
#panel-promotions .adm-pop [style*="grid-template-columns:120px"] > * {
  min-width: 0;
}


/* Inputs inside popovers */
#panel-promotions .adm-pop input.adm-input,
#panel-promotions .adm-pop select.adm-select {
  width: 100%;
  min-height: 34px;
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
}

/* Check-list zones (Link Coupons / Channel / Publish) */
#panel-promotions .adm-pop .list {
  display: grid;
  grid-template-columns: 1fr;
  row-gap: 6px;
  max-height: 44vh;
  overflow: auto;
  padding-right: 4px;                 /* avoid scrollbar overlap */
}
#panel-promotions .adm-pop label.row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 4px 0;
  line-height: 1.3;
}
#panel-promotions .adm-pop label.row input[type="checkbox"] {
  width: 16px; height: 16px;
}

/* Actions row in popovers (Save/Cancel) */
#panel-promotions .adm-pop .actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 12px;
}
#panel-promotions .adm-pop .actions .adm-btn {
  border-radius: 9999px;
  padding: 6px 12px;
  font-size: 13px;
  line-height: 1.2;
  box-shadow: none;
}

/* Pills shown inside popovers (e.g., preview chips) keep readable spacing */
#panel-promotions .adm-pop .adm-pill { margin: 2px 4px 0 0; }

/* Safety: long words/IDs never blow up the popover width */
#panel-promotions .adm-pop,
#panel-promotions .adm-pop * {
  overflow-wrap: anywhere;
}

/* Optional: subtle arrow “tail” for a genie-out look */
#panel-promotions .adm-pop::after {
  content: "";
  position: absolute;
  top: -8px; left: 24px;
  border: 8px solid transparent;
  border-bottom-color: #e5e7eb;
}
#panel-promotions .adm-pop::before {
  content: "";
  position: absolute;
  top: -7px; left: 24px;
  border: 7px solid transparent;
  border-bottom-color: #fff;
}
/* APPEND at end of style.admin.css */

/* Coupon "Value" input: exactly 2.5cm wide */
#panel-promotions #couponValue {
  width: 1cm !important;
  max-width: 1cm !important;
  box-sizing: border-box;
}

/* Banner "Title" input: exactly 5.5cm wide */
#panel-promotions #newBannerForm #bannerTitle,
#panel-promotions #bannerTitle {
  width: 3.5cm !important;
  max-width: 3.5cm !important;
  box-sizing: border-box;
}
/* =========================================================
   PROMOTIONS — Align "Value" (type + number) and prevent overlap
   (APPEND ONLY)
   ========================================================= */

/* Ensure each cell in the add-coupon row can shrink without pushing neighbors */
#panel-promotions #newCouponForm > div { min-width: 0; }

/* The Value column (3rd cell in the add-coupon grid) holds the type + number.
   Keep them side-by-side, properly spaced, and confined within the cell. */
#panel-promotions #newCouponForm > div:nth-child(3) > div {
  display: flex;              /* your markup already uses flex inline; this reinforces it */
  align-items: center;
  gap: 8px;
  flex-wrap: nowrap;          /* don’t wrap into Usage Limit’s column */
  max-width: 100%;
}

/* Fixed widths so they never fight each other or spill into Usage Limit */
#panel-promotions #couponType {
  flex: 0 0 110px;
  width: 110px;
  min-width: 110px;
  box-sizing: border-box;
}
#panel-promotions #couponValue {
  flex: 0 0 2.5cm;            /* per your spec */
  width: 2.5cm;
  min-width: 2.5cm;
  box-sizing: border-box;
}

/* Keep the Usage Limit input suitably compact so it never “eats” Value */
#panel-promotions #couponUsageLimit {
  width: 160px;
  min-width: 140px;
  max-width: 180px;
  box-sizing: border-box;
}

/* Safety: ensure the Actions cell’s buttons wrap inside their own column (never over the Status cell) */
#panel-promotions .adm-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  flex-wrap: wrap;            /* wrap within Actions column if space is tight */
  max-width: 100%;
}

/* =========================================================
   PROMOTIONS — Add rows (Coupons + Banners) zoom-safe alignment
   Append only — no JS changes
   ========================================================= */

/* Use the same row rhythm as the tables and let cells shrink safely */
#panel-promotions form.adm-grid { grid-auto-rows: minmax(44px, auto); align-items: center; }
#panel-promotions #newCouponForm.adm-grid-coupons > div,
#panel-promotions #newBannerForm.adm-grid-banners > div { min-width: 0; overflow: hidden; }

/* ---------- ADD COUPON: keep columns stable and stop collisions ---------- */

/* Code field never stretches past its column; stays compact when zoomed */
#panel-promotions #couponCode {
  width: clamp(200px, 28vw, 320px);
  max-width: 100%;
  box-sizing: border-box;
}

/* Channel cell (button only) behaves nicely and doesn't push neighbors */
#panel-promotions #newCouponForm .jsCouponChannels { white-space: nowrap; flex: 0 0 auto; }

/* Value cell = type dropdown + number input side-by-side, confined in cell */
#panel-promotions #newCouponForm > div:nth-child(3) {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: nowrap;              /* never wraps into Usage Limit column */
  max-width: 100%;
}
#panel-promotions #couponType {
  flex: 0 0 110px;
  width: 110px;
  min-width: 110px;
  box-sizing: border-box;
}
#panel-promotions #couponValue {
  flex: 0 0 2.5cm;                /* your exact spec */
  width: 2.5cm;
  min-width: 2.5cm;
  box-sizing: border-box;
}

/* Usage Limit stays compact so it never "eats" Value */
#panel-promotions #newCouponForm > div:nth-child(4) { display: block; }
#panel-promotions #couponUsageLimit {
  width: clamp(140px, 14vw, 180px);
  min-width: 140px;
  max-width: 180px;
  box-sizing: border-box;
}

/* Status text in add row uses normal body size (not tiny) */
#panel-promotions #newCouponForm > div:nth-child(5) {
  font-size: 14px;
  line-height: 1.4;
}

/* Actions live under the Actions column; wrap/stack inside their own cell */
#panel-promotions #newCouponForm .adm-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  flex-wrap: wrap;                /* wraps within Actions cell at tight zooms */
  max-width: 100%;
}
#panel-promotions #newCouponForm .adm-actions .adm-btn {
  flex: 0 1 auto;
  min-width: 88px;
  white-space: nowrap;
}

/* ---------- ADD BANNER: align inputs and controls cleanly ---------- */

/* Keep native file button; no stretched shell */
#panel-promotions #newBannerForm .adm-file {
  border: none; padding: 0; background: transparent; width: auto; box-shadow: none; font-size: initial;
}
#panel-promotions #newBannerForm .adm-file::file-selector-button {
  font: inherit; border:1px solid #111; border-radius:9999px; background:#fff; color:#111; padding:6px 12px; cursor:pointer;
}

/* Title width = 5.5cm (your spec), but never exceeds its column */
#panel-promotions #bannerTitle {
  width: 5.5cm;
  max-width: 100%;
  box-sizing: border-box;
}

/* Linked Coupons / Published To cells: tools wrap politely inside the cell */
#panel-promotions #newBannerForm #newBannerLinkedCell,
#panel-promotions #newBannerForm #newBannerTargetsCell {
  display: flex;
  align-items: center;
}
#panel-promotions #newBannerForm #newBannerLinkedCell .inline-tools,
#panel-promotions #newBannerForm #newBannerTargetsCell .inline-tools {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;                /* wraps chips/buttons without pushing columns */
  max-width: 100%;
}

/* Status text in add banner row uses body size */
#panel-promotions #newBannerForm > div:nth-child(5) {
  font-size: 14px;
  line-height: 1.4;
}

/* Actions: same wrapping behavior as coupons; never spills into Status */
#panel-promotions #newBannerForm .adm-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  flex-wrap: wrap;
  max-width: 100%;
}
#panel-promotions #newBannerForm .adm-actions .adm-btn {
  flex: 0 1 auto;
  min-width: 88px;
  white-space: nowrap;
}

/* ---------- General safeguards for add rows ---------- */

/* Inputs/selects never overflow their cell at any zoom */
#panel-promotions #newCouponForm input.adm-input,
#panel-promotions #newCouponForm select.adm-select,
#panel-promotions #newBannerForm input.adm-input,
#panel-promotions #newBannerForm select.adm-select {
  max-width: 100%;
  width: auto;
  box-sizing: border-box;
}

/* Keep Delivery/Dining & status colors intact elsewhere (unchanged) */

/* =========================================================
   PROMOTIONS — Decoupled, zoom-safe Add rows (Coupons + Banners)
   Append only — overrides any earlier grid styles for the forms
   ========================================================= */

/* Turn BOTH add forms into flexible, wrapping toolbars (not grid) */
#panel-promotions #newCouponForm,
#panel-promotions #newBannerForm {
  display: flex !important;            /* defeat any grid template */
  flex-wrap: wrap;                     /* wrap to new line when tight */
  align-items: flex-end;               /* align controls nicely */
  gap: 10px 12px;                      /* row/column gaps */
  grid-template-columns: none !important;
}

/* Ensure every child can shrink without pushing neighbors */
#panel-promotions #newCouponForm > *,
#panel-promotions #newBannerForm > * {
  min-width: 0;
  max-width: 100%;
  overflow: hidden;
}

/* -------------------------------------
   ADD COUPON (decoupled + adaptive)
   ------------------------------------- */

/* Code */
#panel-promotions #couponCode {
  flex: 2 1 clamp(220px, 28vw, 420px);
  box-sizing: border-box;
}

/* Channel (button) */
#panel-promotions #couponChannelsCell,
#panel-promotions #couponChannelsCell .jsCouponChannels {
  flex: 0 0 auto;
  white-space: nowrap;
}

/* Value = type dropdown + number input (kept side-by-side) */
#panel-promotions #couponType {
  flex: 0 1 120px;
  min-width: 110px;
  box-sizing: border-box;
}
#panel-promotions #couponValue {
  flex: 0 1 2.5cm;                     /* your exact spec */
  min-width: 2.5cm;
  max-width: 2.5cm;
  box-sizing: border-box;
}

/* Usage Limit (stay compact; never “eat” Value) */
#panel-promotions #couponUsageLimit {
  flex: 0 1 clamp(140px, 14vw, 180px);
  min-width: 140px;
  box-sizing: border-box;
}

/* Status preview (“Active”) – normal body size */
#panel-promotions #newCouponForm > .couponStatusPreview {
  flex: 0 0 auto;
  font-size: 14px;
  line-height: 1.4;
  white-space: nowrap;
}

/* Actions — wrap/stack INSIDE their cell when tight */
#panel-promotions #newCouponForm .adm-actions {
  display: flex;
  gap: 8px;
  flex: 1 0 180px;                     /* takes remaining space but can shrink */
  justify-content: flex-end;
  flex-wrap: wrap;                      /* wraps inside its own area */
}
#panel-promotions #newCouponForm .adm-actions .adm-btn {
  flex: 0 1 auto;
  min-width: 88px;
  white-space: nowrap;
}

/* -------------------------------------
   ADD BANNER (decoupled + adaptive)
   ------------------------------------- */

/* File input — keep native button; no stretched shell */
#panel-promotions #newBannerForm .adm-file {
  border: none; padding: 0; background: transparent; width: auto; box-shadow: none;
}
#panel-promotions #newBannerForm .adm-file::file-selector-button {
  font: inherit; border:1px solid #111; border-radius:9999px;
  background:#fff; color:#111; padding:6px 12px; cursor:pointer;
}

/* Title — exactly 5.5cm but allowed to go narrower when very tight */
#panel-promotions #bannerTitle {
  flex: 0 1 5.5cm;
  width: 5.5cm;
  max-width: 100%;
  box-sizing: border-box;
}

/* Link Coupons / Publish buttons — cohesive and non-overlapping */
#panel-promotions #newBannerLinkedCell,
#panel-promotions #newBannerTargetsCell {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1 1 clamp(200px, 24vw, 360px); /* grow when space, shrink when tight */
  min-width: 200px;
}
#panel-promotions #newBannerLinkedCell .inline-tools,
#panel-promotions #newBannerTargetsCell .inline-tools {
  display: flex; align-items: center; gap: 8px; flex-wrap: wrap;
}

/* Status preview (“Active”) */
#panel-promotions #newBannerForm > .bannerStatusPreview {
  flex: 0 0 auto;
  font-size: 14px;
  line-height: 1.4;
  white-space: nowrap;
}

/* Actions — wrap/stack within their space */
#panel-promotions #newBannerForm .adm-actions {
  display: flex;
  gap: 8px;
  flex: 1 0 200px;
  justify-content: flex-end;
  flex-wrap: wrap;
}
#panel-promotions #newBannerForm .adm-actions .adm-btn {
  flex: 0 1 auto;
  min-width: 88px;
  white-space: nowrap;
}

/* -------------------------------------
   General safeguards for add forms
   ------------------------------------- */
#panel-promotions #newCouponForm input.adm-input,
#panel-promotions #newCouponForm select.adm-select,
#panel-promotions #newBannerForm input.adm-input,
#panel-promotions #newBannerForm select.adm-select {
  width: auto;
  max-width: 100%;
  font-size: 14px;                     /* keep body size (no tiny text) */
  line-height: 1.4;
}

#panel-promotions #newBannerForm .adm-btn,
#panel-promotions #newCouponForm .adm-btn {
  border-radius: 9999px;               /* pill look, consistent with rest */
  padding: 6px 12px;
  font-size: 13px;
  line-height: 1.2;
  box-shadow: none;
}

/* =========================================================
   PROMOTIONS — Unified control sizing & alignment for ADD rows
   (APPEND ONLY; no JS changes)
   ========================================================= */

/* 0) A single control height across inputs, selects and buttons */
:root { --promo-ctrl-h: 36px; }

#panel-promotions #newCouponForm,
#panel-promotions #newBannerForm {
  align-items: center;                 /* align baselines visually */
  gap: 10px 12px;                      /* row/column gaps */
}

/* Inputs & selects use the same height */
#panel-promotions #newCouponForm input.adm-input,
#panel-promotions #newCouponForm select.adm-select,
#panel-promotions #newBannerForm input.adm-input,
#panel-promotions #newBannerForm select.adm-select {
  height: var(--promo-ctrl-h);
  line-height: var(--promo-ctrl-h);
  padding: 0 10px;
  font-size: 14px;
  box-sizing: border-box;
}

/* All action/utility buttons (Channel, Link Coupons, Publish, Add, Upload) match height */
#panel-promotions #newCouponForm .adm-btn,
#panel-promotions #newCouponForm .chip-btn,
#panel-promotions #newBannerForm .adm-btn,
#panel-promotions #newBannerForm .chip-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: var(--promo-ctrl-h);
  line-height: var(--promo-ctrl-h);
  padding: 0 12px;
  font-size: 14px;
  border-radius: 9999px;               /* pill */
  box-shadow: none;
  white-space: nowrap;
}

/* Native file button styled to the same size as other controls */
#panel-promotions #newBannerForm .adm-file {
  border: none; padding: 0; background: transparent; width: auto; box-shadow: none;
}
#panel-promotions #newBannerForm .adm-file::file-selector-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: var(--promo-ctrl-h);
  line-height: var(--promo-ctrl-h);
  padding: 0 12px;
  font-size: 14px;
  border: 1px solid #111; border-radius: 9999px;
  background: #fff; color: #111; cursor: pointer;
}

/* Keep “Value” pair together and aligned; never collided by Usage Limit */
#panel-promotions #couponType {
  flex: 0 1 120px; min-width: 110px; height: var(--promo-ctrl-h);
}
#panel-promotions #couponValue {
  flex: 0 1 2.5cm; min-width: 2.5cm; max-width: 2.5cm; height: var(--promo-ctrl-h);
}
#panel-promotions #couponUsageLimit {
  flex: 0 1 clamp(140px, 14vw, 180px); min-width: 140px; height: var(--promo-ctrl-h);
}

/* Channel / Link Coupons / Publish buttons align cleanly with fields next to them */
#panel-promotions #couponChannelsCell .jsCouponChannels,
#panel-promotions #newBannerLinkedCell .adm-btn,
#panel-promotions #newBannerTargetsCell .adm-btn {
  height: var(--promo-ctrl-h);
}

/* Title input exact width + alignment */
#panel-promotions #bannerTitle {
  flex: 0 1 5.5cm;
  width: 5.5cm; max-width: 100%;
  height: var(--promo-ctrl-h);
}

/* Place Add/Upload buttons right after fields (not pushed to far right) */
#panel-promotions #newCouponForm .adm-actions,
#panel-promotions #newBannerForm .adm-actions {
  display: inline-flex;                /* sit in natural flow */
  align-items: center;
  gap: 8px;
  justify-content: flex-start;         /* no right push */
  flex: 0 0 auto;                      /* do not grow */
  max-width: 100%;
}
#panel-promotions #newCouponForm .adm-actions .adm-btn,
#panel-promotions #newBannerForm .adm-actions .adm-btn {
  height: var(--promo-ctrl-h);
  min-width: 88px;
}

/* Safeguards: no element forces overflow; wrap when tight */
#panel-promotions #newCouponForm > *,
#panel-promotions #newBannerForm > * { min-width: 0; max-width: 100%; }
#panel-promotions #newBannerLinkedCell .inline-tools,
#panel-promotions #newBannerTargetsCell .inline-tools { flex-wrap: wrap; gap: 8px; }

/* =========================================================
   PROMOTIONS — Add Banner: cohesive, aligned controls
   (APPEND ONLY; no JS changes)
   ========================================================= */

/* Make the Add Banner row a flexible toolbar (already decoupled from list) */
#panel-promotions #newBannerForm {
  display: flex !important;
  flex-wrap: wrap;
  align-items: center;                 /* align with inputs (“bars”) */
  gap: 10px 12px;
}

/* Order the controls so they appear naturally:
   File → Title → Link Coupons → Publish → Upload → (Status) */
#panel-promotions #newBannerForm .adm-file        { order: 10; }
#panel-promotions #newBannerForm #bannerTitle     { order: 20; }
#panel-promotions #newBannerForm #newBannerLinkedCell  { order: 30; }
#panel-promotions #newBannerForm #newBannerTargetsCell { order: 40; }
#panel-promotions #newBannerForm .adm-actions     { order: 50; }
/* (Status preview, if any, remains after this in DOM order) */

/* Keep each block compact — no huge flex bases that create odd gaps */
#panel-promotions #newBannerForm #newBannerLinkedCell,
#panel-promotions #newBannerForm #newBannerTargetsCell,
#panel-promotions #newBannerForm .adm-actions {
  flex: 0 0 auto;                      /* size to content, sit next to each other */
  min-width: 0;
  max-width: 100%;
}

/* Inside “Linked” / “Published” wrappers: buttons align neatly; previews hidden */
#panel-promotions #newBannerForm #newBannerLinkedCell .inline-tools,
#panel-promotions #newBannerForm #newBannerTargetsCell .inline-tools {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}
#panel-promotions #newBannerLinkedPreview,
#panel-promotions #newBannerTargetsPreview {
  display: none;                        /* keep buttons tight & contiguous */
}

/* Uniform control height so buttons line up with inputs */
:root { --promo-ctrl-h: 36px; }

#panel-promotions #newBannerForm input.adm-input,
#panel-promotions #newBannerForm select.adm-select {
  height: var(--promo-ctrl-h);
  line-height: var(--promo-ctrl-h);
  padding: 0 10px;
  font-size: 14px;
  box-sizing: border-box;
}

/* File input styled as a button at same height */
#panel-promotions #newBannerForm .adm-file {
  border: none; padding: 0; background: transparent; width: auto; box-shadow: none;
}
#panel-promotions #newBannerForm .adm-file::file-selector-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: var(--promo-ctrl-h);
  line-height: var(--promo-ctrl-h);
  padding: 0 12px;
  font-size: 14px;
  border: 1px solid #111; border-radius: 9999px;
  background: #fff; color: #111; cursor: pointer;
}

/* Title width per spec, but allowed to shrink if space is tight */
#panel-promotions #newBannerForm #bannerTitle {
  flex: 0 1 5.5cm;
  width: 5.5cm;
  max-width: 100%;
}

/* Make Link / Publish / Upload same visual size & aligned */
#panel-promotions #newBannerForm .adm-btn,
#panel-promotions #newBannerForm .chip-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: var(--promo-ctrl-h);
  line-height: var(--promo-ctrl-h);
  padding: 0 12px;
  font-size: 14px;
  border-radius: 9999px;
  box-shadow: none;
  white-space: nowrap;
}

/* Keep Upload right after Publish (not shoved to the far right) */
#panel-promotions #newBannerForm .adm-actions {
  display: inline-flex;
  justify-content: flex-start;          /* sit in-flow next to Publish */
  gap: 8px;
}

/* =========================================================
   PROMOTIONS — Popovers: wide, spacious, no overflow (desktop zoom safe)
   Append only
   ========================================================= */
#panel-promotions .adm-pop {
  position: fixed;                   /* match JS for viewport-based placement */
  box-sizing: border-box;
  width: clamp(420px, 52vw, 760px);  /* roomy by default, never absurdly wide */
  max-width: calc(100vw - 32px);     /* clamp to viewport with padding */
  max-height: min(72vh, 600px);      /* scroll inside if tall */
  overflow: auto;
  padding: 16px 18px;
  border-radius: 12px;
  background: #fff;
  border: 1px solid #e5e7eb;
  box-shadow: 0 12px 28px rgba(0,0,0,.12), 0 2px 8px rgba(0,0,0,.06);
  z-index: 9999;
}

/* Title at top of popovers */
#panel-promotions .adm-pop > div:first-child {
  font-weight: 700;
  font-size: 15px;
  margin-bottom: 12px;
}

/* Forms inside "Edit" popovers — breathe and align */
#panel-promotions .adm-pop [style*="grid-template-columns:120px"] {
  display: grid !important;
  grid-template-columns: 150px minmax(260px, 1fr) !important; /* wider input column */
  gap: 12px !important;
  align-items: center !important;
}

/* Inputs/selects in popovers never overflow their column */
#panel-promotions .adm-pop input.adm-input,
#panel-promotions .adm-pop select.adm-select {
  width: 100%;
  max-width: 100%;
  min-height: 36px;
  line-height: 36px;
  padding: 0 10px;
  font-size: 14px;
  box-sizing: border-box;
}

/* Checklists (Link Coupons / Channel / Publish) — roomy, scrollable */
#panel-promotions .adm-pop .list {
  display: grid;
  grid-template-columns: 1fr;
  row-gap: 8px;
  max-height: 46vh;
  overflow: auto;
  padding-right: 4px;
}
#panel-promotions .adm-pop label.row {
  display: flex;
  align-items: center;
  gap: 10px;
  line-height: 1.3;
  padding: 2px 0;
}
#panel-promotions .adm-pop label.row input[type="checkbox"] {
  width: 16px; height: 16px;
}

/* Actions row (Save / Cancel) */
#panel-promotions .adm-pop .actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 12px;
}
#panel-promotions .adm-pop .actions .adm-btn {
  border-radius: 9999px;
  height: 36px; line-height: 36px;
  padding: 0 12px;
  font-size: 14px;
}

/* Safety: long words / codes never stretch the sheet */
#panel-promotions .adm-pop,
#panel-promotions .adm-pop * { overflow-wrap: anywhere; }

/* Optional: tidy "tail" (still looks correct when flipped) */
#panel-promotions .adm-pop::after {
  content: ""; position: absolute; border: 8px solid transparent; border-bottom-color: #e5e7eb;
  top: -8px; left: 24px;
}
#panel-promotions .adm-pop::before {
  content: ""; position: absolute; border: 7px solid transparent; border-bottom-color: #fff;
  top: -7px; left: 24px;
}

/* Safety: nothing overflows at any desktop zoom */
#panel-promotions #newBannerForm > * {
  min-width: 0;
  max-width: 100%;
  overflow: hidden;
}

/* =========================================================
   Promotions — Popover bars MUST stay inside the sheet
   (append-only; desktop-zoom safe)
   ========================================================= */

/* Make the sheet roomy but clamp to viewport */
#panel-promotions .adm-pop {
  width: min(620px, calc(100vw - 48px));
  max-width: calc(100vw - 48px);
  max-height: min(72vh, 600px);
  padding: 16px 18px;
  overflow: auto;
  box-sizing: border-box;
  scrollbar-gutter: stable;
}

/* Edit form grid inside popovers:
   - fixed label column
   - fully flexible input column that never overflows */
#panel-promotions .adm-pop [style*="grid-template-columns:120px"] {
  display: grid !important;
  grid-template-columns: 120px minmax(0, 1fr) !important;
  column-gap: 12px !important;
  row-gap: 10px !important;
  align-items: center !important;
}
#panel-promotions .adm-pop [style*="grid-template-columns:120px"] > * {
  min-width: 0;                 /* lets children shrink within the column */
}

/* Bars (inputs/selects) must never overflow the popover */
#panel-promotions .adm-pop input.adm-input,
#panel-promotions .adm-pop select.adm-select {
  display: block;
  inline-size: 100% !important;      /* fill the grid column, no spill */
  max-inline-size: 100% !important;
  height: 36px;
  line-height: 36px;
  padding: 0 10px;
  margin: 0 !important;
  box-sizing: border-box;
  overflow: hidden;
}

/* Checkbox rows stay tidy */
#panel-promotions .adm-pop label.row {
  display: flex;
  align-items: center;
  gap: 10px;
  line-height: 1.3;
  padding: 2px 0;
}

/* Actions row stays inside, never sticks out */
#panel-promotions .adm-pop .actions {
  display: flex;
  justify-content: flex-end;
  gap: 4px;
  margin-top: 12px;
  max-inline-size: 100%;
  flex-wrap: wrap;
}
#panel-promotions .adm-pop .actions .adm-btn {
  height: 36px;
  line-height: 36px;
  padding: 0 12px;
  border-radius: 10999px;
  white-space: nowrap;
}

/* Absolute safety: nothing inside the popover can extend the right edge */
#panel-promotions .adm-pop,
#panel-promotions .adm-pop * {
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* Promotions — compact popover size token */
#panel-promotions .adm-pop[data-size="sm"] {
  width: clamp(280px, 40vw, 420px);
  max-width: calc(100vw - 32px);
}

/* Promotions — prevent over-stretching inside Edit popovers */
#panel-promotions .adm-pop [style*="grid-template-columns:120px"] > *:nth-child(2n) {
  min-width: 0;                 /* allow the field column to shrink within grid */
}

/* Ensure long tokens (codes, IDs) wrap instead of forcing width growth */
#panel-promotions .adm-pop,
#panel-promotions .adm-pop * {
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* Clamp every common control to the container width */
#panel-promotions .adm-pop input.adm-input,
#panel-promotions .adm-pop select.adm-select,
#panel-promotions .adm-pop textarea,
#panel-promotions .adm-pop .list,
#panel-promotions .adm-pop .row > * {
  max-width: 100%;
  box-sizing: border-box;
}

/* Checklist rows: keep text from pushing the layout wide */
#panel-promotions .adm-pop .list label.row span {
  display: inline-block;
  max-width: 100%;
}

#panel-promotions .adm-pop .actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 12px;
  flex-wrap: wrap;          /* prevent buttons from stretching the bubble */
  max-width: 100%;
  box-sizing: border-box;
}

#panel-promotions .adm-pop [style*="grid-template-columns:120px"] {
  display: grid !important;
  grid-template-columns: 140px minmax(220px, 1fr) !important;
  gap: 10px !important;
  align-items: center !important;
  max-width: 100%;                 /* never exceed the bubble */
  box-sizing: border-box;
}

#panel-promotions .adm-pop .list {
  display: grid;
  grid-template-columns: 1fr;
  row-gap: 6px;
  max-height: 44vh;
  overflow: auto;
  padding-right: 4px;                 /* avoid scrollbar overlap */
  max-width: 100%;                    /* never overflow the bubble */
  box-sizing: border-box;
}


/* Safety: long words/IDs never blow up the popover width */
.adm-pop,
.adm-pop * {
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* Size tokens for simpler popovers (e.g., Channel picker) */
.adm-pop[data-size="sm"] {
  width: clamp(280px, 40vw, 420px);
}

/* === Promotions: Compact popover override (Channel picker only) ===
   Uses the existing data-size="sm" set in JS, and overrides any wider defaults */
.adm-pop[data-size="sm"],
#panel-promotions .adm-pop[data-size="sm"] {
  width: clamp(260px, 36vw, 420px) !important;   /* narrower than default popovers */
  max-width: calc(100vw - 32px) !important;      /* guard on tiny viewports */
  box-sizing: border-box;
}

/* Let actions wrap inside the compact popover instead of widening it */
.adm-pop[data-size="sm"] .actions,
#panel-promotions .adm-pop[data-size="sm"] .actions {
  flex-wrap: wrap;
  max-width: 100%;
}

/* === Channel popover: compact like "Publish" === */
.adm-pop[data-kind="channel"],
#panel-promotions .adm-pop[data-kind="channel"] {
  /* override wide defaults just for Channel */
  width: clamp(240px, 32vw, 360px) !important;
  max-width: calc(100vw - 32px) !important;
  box-sizing: border-box;
  padding: 12px 14px;
}

/* keep buttons from widening the compact sheet */
.adm-pop[data-kind="channel"] .actions,
#panel-promotions .adm-pop[data-kind="channel"] .actions {
  flex-wrap: wrap;
  max-width: 100%;
}
